# Комментарии к решению 
## Импорт-экспорт модуля
При первом запуске в консоли получаем
```
WARNING in ./src/index.js 4:2-9
"export 'default' (imported as 'initMap') was not found in './map'
```

Можно решить двумя способами:
В src/map.js, 5
```
export default function initMap(ymaps, containerId) {
```
или в src/index.js, 1, 
```
import { initMap } from "./map";
```
Так как в проекте используется вторая форма записи, выбираем ее

## Нулевая высота div
Открываем браузер, видим пустую страницу, ошибок в консоли нет.
Открываем консоль -> Elements, видим, что компонент карт был инициализирован и смонтирован в DOM. Контейнер, содержащий карты имеет высоту 0.
![2](https://pp.userapi.com/c824203/v824203828/1927da/uCgQ8Pwi60M.jpg)

Меняем ее на полную высоту экрана:
```
#map {
  height: 100vh;
}
```

## Отображение станций
Карта отображается, но на ней нет станций. Сравниваем содержимое файла map.js с [документацией](https://tech.yandex.ru/maps/doc/jsapi/2.1/dg/concepts/object-manager/about-docpage/) и примером в [песочнице](https://tech.yandex.ru/maps/jsbox/2.1/object_manager), обнаруживаем, что несмотря на то, что объекты были созданы,
```
loadList().then(data => {
    console.log(data);
    objectManager.add(data);
  });
```
они не добавляются на карту. Исправляем: 
```
myMap.geoObjects.add(objectManager);
```

## Позиционирование станций
Но где же станции? При загрузке отображается карта Москвы, а станции находятся на территории Ирана? Звучит нелогично.
![4](https://pp.userapi.com/c824203/v824203828/192800/jpuvuLeLCLA.jpg)
Учитывая, что значения широты и долготы для центра карты и для генерации данных очень похожи, по всей видимости, они перепутаны. Меняем местами ключи: 
```
long: 55.755222 + rand() * 0.12242,
lat: 37.62102 + rand() * 0.180189
```
Предположение оказалось верным, теперь станции расположены в пределах Москвы и ближайшего Подмосковья

## Изменение иконки кластера, в котором есть неисправный объект
В решении данной проблемы очень помог [комментарий пользователя Masis Abul к посту в блоге](https://yandex.ru/blog/mapsapi/55358).
В момент создания кластера, мы проверяем все входящие в него объекты при помощи функции Array.prototype.some(). Если хотя бы один элемент удовлетворяет условию, для данного кластера создаем/изменяем свойство preset.
В map.js добавляем
```
objectManager.clusters.events.add('add', function (e) {
    let cluster = objectManager.clusters.getById(e.get('objectId'));
    if (cluster.properties.geoObjects.some(object => !object.isActive)) {
      cluster.options.preset = 'islands#redClusterIcons';
    }
  });
```

Получаем следующую картину:
![5](https://pp.userapi.com/c846019/v846019655/a61c7/Om_mnx-fsWM.jpg)

## Отображение попапа при клике на объект
TODO

## Бонус. Формат индекса
Стилизационное украшение. Задание формата индекса позволит работать с индексами, похожими на действущие по г. Москва
```
serialNumber: faker.address.zipCode("1#####"),
```

## Бонус. Ошибка окружения
Перед первым запуском, после запуска webpack-dev-server получил ошибку webpack'a несмотря на то, что версия webpack обновлена до 4.16.1 и [оператор расширения для объектов находится в finished proposals](https://github.com/tc39/proposals/blob/master/finished-proposals.md), а значит, должен находится в последней спецификацией языка и транспилироваться при помощи webpack без babel
```
res.json({ ...info, ...details });
Unexpected token ...
```
Обновление npm при помощи [npm-windows-upgrade](https://github.com/felixrieseberg/npm-windows-upgrade) не дало результатов.
Проблема была решена переустановкой Node.js вместе с npm

---

# Задание 1 — найди ошибки

В этом репозитории находятся материалы тестового задания "Найди ошибки" для [14-й Школы разработки интерфейсов](https://academy.yandex.ru/events/frontend/shri_msk-2018-2) (осень 2018, Москва, Санкт-Петербург, Симферополь).

Для работы тестового приложения нужен Node.JS v9. В проекте используются [Yandex Maps API](https://tech.yandex.ru/maps/doc/jsapi/2.1/quick-start/index-docpage/) и [ChartJS](http://www.chartjs.org).

## Задание

Код содержит ошибки разной степени критичности. Некоторые из них — стилистические, а другие — даже не позволят вам запустить приложение. Вам нужно найти все ошибки и исправить их.

Пункты для самопроверки:

1. Приложение должно успешно запускаться.
1. По адресу http://localhost:9000 должна открываться карта с метками.
1. Должна правильно работать вся функциональность, перечисленная в условиях задания.
1. Не должно быть лишнего кода.
1. Все должно быть в едином codestyle.

## Запуск

```
npm i
npm start
```

При каждом запуске тестовые данные генерируются заново случайным образом.


